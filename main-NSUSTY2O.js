import{c as G,d as S,e as T,f as H,g as U,h as x,i as V,k as $,l as z,q}from"./chunk-Q3GMSB77.js";import{a as v,b as l,c as O,d as D,e as E,g as _}from"./chunk-G6YZQZKL.js";import{A as b,Da as f,Ib as P,Jb as j,Kb as F,Lb as R,Na as r,Oa as a,Ob as N,Pa as i,R as w,Ua as h,W as I,X as g,Z as p,bb as c,db as A,hb as s,ib as M,p as L,ra as d,sa as u}from"./chunk-LDLJT7P6.js";function Y(){return()=>{let e=g(l);return localStorage.getItem("token")?!0:e.navigate([""])}}var k=(()=>{class e{constructor(o){this.http=o,this.API_URL=`${N.apiUrl}auth/`}postLogin(o){return this.http.post(`${this.API_URL}login`,o)}postLogout(){return this.http.post(`${this.API_URL}logout`,{})}static{this.\u0275fac=function(t){return new(t||e)(I(P))}}static{this.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var re=()=>({exact:!0}),J=(()=>{class e{constructor(o,t){this.authService=o,this.router=t}onLogout(){this.authService.postLogout().subscribe(),localStorage.removeItem("token"),this.router.navigate(["/"])}static{this.\u0275fac=function(t){return new(t||e)(u(k),u(l))}}static{this.\u0275cmp=p({type:e,selectors:[["app-header"]],standalone:!0,features:[s],decls:10,vars:2,consts:[[1,"header"],[1,"header__logo"],["src","./assets/images/logo-dark.png","alt","logo"],[1,"header__links"],["routerLink","./","routerLinkActive","header__links__link--active",1,"header__links__link",3,"routerLinkActiveOptions"],["routerLink","project-add","routerLinkActive","header__links__link--active",1,"header__links__link"],["type","button",1,"btn","btn-primary",3,"click"],["src","./assets/icons/logout.svg","alt","logout"]],template:function(t,n){t&1&&(r(0,"header",0)(1,"figure",1),i(2,"img",2),a(),r(3,"div",3)(4,"a",4),c(5," Proyectos "),a(),r(6,"a",5),c(7," Agregar proyecto "),a()(),r(8,"button",6),h("click",function(){return n.onLogout()}),i(9,"img",7),a()()),t&2&&(d(4),f("routerLinkActiveOptions",M(1,re)))},dependencies:[O,D],styles:[".header[_ngcontent-%COMP%]{position:sticky;top:0;display:flex;justify-content:space-between;align-items:center;gap:1rem;padding:1rem;background-color:var(--gray-primary);box-shadow:0 0 1rem #00000047;z-index:1000}.header__logo[_ngcontent-%COMP%]{max-width:4.2rem}.header__links[_ngcontent-%COMP%]{display:flex;gap:1.5rem}.header__links__link[_ngcontent-%COMP%]{color:#000;text-decoration:none}.header__links__link[_ngcontent-%COMP%]:hover, .header__links__link--active[_ngcontent-%COMP%]{color:var(--bs-primary)}"]})}}return e})();var K=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-admin"]],standalone:!0,features:[s],decls:2,vars:0,template:function(t,n){t&1&&i(0,"app-header")(1,"router-outlet")},dependencies:[J,v]})}}return e})();var Q=(()=>{class e{constructor(o,t){this.router=o,this.authService=t,this.form=new U({user:new x("",S.required),password:new x("",S.required)}),this.loading=!1}sendLogin(){this.loading=!0,this.authService.postLogin(this.form.value).subscribe({next:o=>{localStorage.setItem("token",o.token),this.router.navigate(["admin"])},error:o=>{_("Usuario o contrase\xF1a incorrecta"),this.loading=!1}})}static{this.\u0275fac=function(t){return new(t||e)(u(l),u(k))}}static{this.\u0275cmp=p({type:e,selectors:[["app-login"]],standalone:!0,features:[s],decls:14,vars:3,consts:[[1,"login"],[1,"login__form",3,"ngSubmit","formGroup"],[1,"login__logo"],["src","./assets/images/logo.png","alt","logo"],[1,"form-floating"],["type","text","id","floatingInput","placeholder","name@example.com","formControlName","user",1,"form-control"],["for","floatingInput"],["type","password","id","floatingPassword","placeholder","Password","formControlName","password",1,"form-control"],["for","floatingPassword"],["type","submit",1,"btn","btn-primary",3,"disabled"]],template:function(t,n){t&1&&(r(0,"article",0)(1,"form",1),h("ngSubmit",function(){return n.sendLogin()}),r(2,"figure",2),i(3,"img",3),a(),r(4,"div",4),i(5,"input",5),r(6,"label",6),c(7,"Nombre de usuario"),a()(),r(8,"div",4),i(9,"input",7),r(10,"label",8),c(11,"Contrase\xF1a"),a()(),r(12,"button",9),c(13),a()()()),t&2&&(d(),f("formGroup",n.form),d(11),f("disabled",n.form.invalid||n.loading),d(),A(" ",n.loading?"Cargando...":"Iniciar sesi\xF3n"," "))},dependencies:[q,V,G,T,H,$,z],styles:[".login[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:1rem;height:100vh}.login__form[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;gap:1rem;padding:4rem 2rem 3rem;width:100%;max-width:550px;border-radius:1rem;background-color:var(--gray-primary);box-shadow:0 0 .5rem #00000047}.login__logo[_ngcontent-%COMP%]{position:absolute;top:-35%;left:50%;transform:translate(-50%);transform:translateY(35%);transform:translate(-50%,35%);padding:1rem;background-color:#000;border-radius:1rem}"]})}}return e})();var W=[{path:"",component:Q},{path:"admin",component:K,canActivate:[Y()],children:[{path:"",loadComponent:()=>import("./chunk-S2MN4S4X.js").then(e=>e.ProjectsComponent)},{path:"project-add",loadComponent:()=>import("./chunk-SARFGCYX.js").then(e=>e.ManageProjectComponent)},{path:"project-edit",loadComponent:()=>import("./chunk-SARFGCYX.js").then(e=>e.ManageProjectComponent)},{path:"project-detail",loadComponent:()=>import("./chunk-UW6FELWX.js").then(e=>e.ProjectDetailComponent)}]},{path:"**",redirectTo:"",pathMatch:"full"}];var X=(e,y)=>{let o=g(l),t=localStorage.getItem("token"),n=m=>(m.status===401&&(localStorage.removeItem("token"),o.navigate([""]),_("La sesi\xF3n ha expirado")),L(()=>m));if(t){let m=e.clone({headers:e.headers.set("Authorization",t)});return y(m).pipe(b(te=>n(te)))}return y(e).pipe(b(m=>n(m)))};var Z={providers:[E(W),j(F([X]))]};var ee=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-root"]],standalone:!0,features:[s],decls:1,vars:0,template:function(t,n){t&1&&i(0,"router-outlet")},dependencies:[v]})}}return e})();R(ee,Z).catch(e=>console.error(e));
