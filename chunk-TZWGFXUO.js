import{a as g}from"./chunk-REU2DSL3.js";import{b as x,c as O,f as I,g as T}from"./chunk-4TZEXCOD.js";import{Ba as b,Da as u,Ia as y,Ja as w,La as S,Ma as M,Na as o,Oa as i,Pa as c,Ua as f,Z as p,a as _,b as C,bb as s,db as k,e as D,f as P,hb as l,ma as h,ra as d,sa as m}from"./chunk-ULDYDPEK.js";var L=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=p({type:e,selectors:[["app-loading"]],standalone:!0,features:[l],decls:4,vars:0,consts:[[1,"loading"],[1,"loading__loader"]],template:function(n,r){n&1&&(o(0,"div",0),c(1,"div",1),o(2,"span"),s(3,"Cargando..."),i()())},styles:[".loading[_ngcontent-%COMP%]{text-align:center}.loading__loader[_ngcontent-%COMP%]{width:3.5rem;padding:.5rem;margin:0 auto;aspect-ratio:1;border-radius:50%;background:var(--primary);--_m: conic-gradient(#0000 10%, #000), linear-gradient(#000 0 0) content-box;-webkit-mask:var(--_m);mask:var(--_m);-webkit-mask-composite:source-out;mask-composite:subtract;animation:_ngcontent-%COMP%_l3 1s infinite linear}@keyframes _ngcontent-%COMP%_l3{to{transform:rotate(1turn)}}"]})}}return e})();var j=D(I());var z=(e,a)=>{let t={title:"\xBFEst\xE1s seguro(a)?",text:e||"",icon:"question",showCancelButton:!0,allowOutsideClick:!0,allowEscapeKey:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",reverseButtons:!0};return a&&(t=C(_(_({},t),a),{allowOutsideClick:()=>!j.default.isLoading(),showLoaderOnConfirm:!0})),j.default.fire(t)},A=e=>{j.default.fire({title:"\xA1\xC9xito!",text:e,icon:"success",confirmButtonColor:"#198754",timer:3e3})};function F(e,a){return P(this,null,function*(){yield z(e,{preConfirm:()=>new Promise(t=>{a(t)}),showLoaderOnConfirm:!0})})}var B=(()=>{class e{constructor(t,n){this.router=t,this.projectService=n,this.project={}}viewProject(){this.router.navigate(["admin","project-detail"],{state:this.project})}editProject(){this.router.navigate(["admin","project-edit"],{state:this.projectService.originalData.find(t=>t.id===this.project.id)})}deleteProject(){let t=()=>{this.projectService.deleteProject(this.project.id).subscribe({next:()=>{A("Proyecto eliminado correctamente"),this.projectService.newSubscribeToProjects()},error:()=>{T("Error al eliminar el proyecto")}})};F(`Propiedad: ${this.project.name}, ser\xE1 eliminada`,t)}static{this.\u0275fac=function(n){return new(n||e)(m(x),m(g))}}static{this.\u0275cmp=p({type:e,selectors:[["app-project-card"]],inputs:{project:"project"},standalone:!0,features:[l],decls:11,vars:2,consts:[[1,"card","project-card"],[1,"project-card__title"],[1,"project-card__desc",3,"innerHTML"],[1,"project-card__actions"],[1,"btn","btn-success",3,"click"],["src","./assets/icons/eye.svg","alt","view"],[1,"btn","btn-warning",3,"click"],["src","./assets/icons/edit.svg","alt","edit"],[1,"btn","btn-danger",3,"click"],["src","./assets/icons/remove.svg","alt","remove"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"span",1),s(2),i(),c(3,"div",2),o(4,"div",3)(5,"button",4),f("click",function(){return r.viewProject()}),c(6,"img",5),i(),o(7,"button",6),f("click",function(){return r.editProject()}),c(8,"img",7),i(),o(9,"button",8),f("click",function(){return r.deleteProject()}),c(10,"img",9),i()()()),n&2&&(d(2),k(" ",r.project.name," "),d(),u("innerHTML",r.project.description,h))},styles:[".project-card[_ngcontent-%COMP%]{box-shadow:0 0 .5rem #0003;background-color:var(--gray-primary);padding:1rem;height:100%;justify-content:space-between}.project-card__title[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-weight:600;padding-bottom:1rem}.project-card__desc[_ngcontent-%COMP%]{max-height:150px;overflow:hidden}.project-card__desc[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]:first-child{font-size:.8rem}.project-card__actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;padding-top:1rem}.project-card__actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:.2rem 1rem}"]})}}return e})();function q(e,a){if(e&1&&c(0,"app-project-card",1),e&2){let t=a.$implicit;u("project",t)}}function R(e,a){e&1&&(o(0,"div",2)(1,"p"),s(2,"A\xFAn no se ha creado ning\xFAn proyecto"),i(),o(3,"button",3),s(4," Agregar proyecto "),i()())}function $(e,a){e&1&&c(0,"app-loading")}var Z=(()=>{class e{constructor(t){this.projectsService=t}ngOnInit(){this.projectsService.initAllProjects()}static{this.\u0275fac=function(n){return new(n||e)(m(g))}}static{this.\u0275cmp=p({type:e,selectors:[["app-projects"]],standalone:!0,features:[l],decls:5,vars:1,consts:[[1,"projects"],[3,"project"],[1,"projects__no-data"],["type","button","routerLink","project-add",1,"btn","btn-success"]],template:function(n,r){n&1&&(o(0,"article",0),S(1,q,1,1,"app-project-card",1,w),i(),b(3,R,5,0,"div",2)(4,$,1,0)),n&2&&(d(),M(r.projectsService.projects),d(2),y(3,!r.projectsService.projects.length&&!r.projectsService.loading?3:r.projectsService.loading?4:-1))},dependencies:[O,B,L],styles:[".projects[_ngcontent-%COMP%]{display:grid;gap:2rem;grid-template-columns:repeat(auto-fill,minmax(min(100%,300px),1fr));padding:3rem 1rem}.projects__no-data[_ngcontent-%COMP%]{width:100%;text-align:center}.projects__no-data[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{font-size:2rem}"]})}}return e})();export{Z as ProjectsComponent};
